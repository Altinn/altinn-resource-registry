meta {
  name: Create devtest_gar_bruno_accesslist_actionfilter
  type: http
  seq: 18
}

post {
  url: {{baseUrl}}/resourceregistry/api/v1/resource/
  body: json
  auth: bearer
}

auth:bearer {
  token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjM4QUE3QTc5MjUzNDNCQjE0NjFCRUUwMURCNUQwOTRBM0VCOTgwMjUiLCJ0eXAiOiJKV1QiLCJ4NWMiOiIzOEFBN0E3OTI1MzQzQkIxNDYxQkVFMDFEQjVEMDk0QTNFQjk4MDI1In0.eyJzY29wZSI6ImFsdGlubjpyZXNvdXJjZXJlZ2lzdHJ5L2FjY2Vzcy1saXN0LndyaXRlIGFsdGlubjpyZXNvdXJjZXJlZ2lzdHJ5L3Jlc291cmNlLmFkbWluIiwidG9rZW5fdHlwZSI6IkJlYXJlciIsImV4cCI6MTcyNzAzNTM1MCwiaWF0IjoxNzI2Njc1MzUwLCJjbGllbnRfaWQiOiIxMjlhM2IzYy0yNzY5LTQ2YzctYjkzYy01ZmQ5YTE0ZGE1ZWYiLCJqdGkiOiI4cFZodlZ3WUk2aEkyTExuOVJYRXRtTlAxdXRDMEdiaUtOT1hwMFBjNkpBIiwiY29uc3VtZXIiOnsiYXV0aG9yaXR5IjoiaXNvNjUyMy1hY3RvcmlkLXVwaXMiLCJJRCI6IjAxOTI6OTkxODI1ODI3In0sInVybjphbHRpbm46b3JnTnVtYmVyIjoiOTkxODI1ODI3IiwidXJuOmFsdGlubjphdXRoZW50aWNhdGVtZXRob2QiOiJtYXNraW5wb3J0ZW4iLCJ1cm46YWx0aW5uOmF1dGhsZXZlbCI6MywiaXNzIjoiaHR0cHM6Ly9wbGF0Zm9ybS50dDAyLmFsdGlubi5uby9hdXRoZW50aWNhdGlvbi9hcGkvdjEvb3BlbmlkLyIsImFjdHVhbF9pc3MiOiJhbHRpbm4tdGVzdC10b29scyIsIm5iZiI6MTcyNjY3NTM1MCwidXJuOmFsdGlubjpvcmciOiJ0dGQifQ.UhWZsjNKbeCeycpd8EwC6J8FVxayMn2k_OxniepvwdA94Un7svddh6b9mdDulylni0uJ3xLgMZGZztRT1kPcZ2Cm1DQJxLyzkWKvK0FdMjmxp2Q6m36b6I_n7MtIdeDu1UvzpbJgb2tWiy6kPcagfBu1RbN8A-IO8L-yXKsiyw01dNbWR_nSGxilMOQbgjV_PS8zPlK9duVeASxDpVXEOq60os3N-1dwsoPMT04tozpnlrHGHfOrS49LN3a41jOutwfKitYET3nbOgrsS8geNz-uaEUjq86snkMjIExmvFZxlDONJvHnym_5d0zWeRhRXuVOEYzOtmLipkCz6OcKQw
}

body:json {
  {
    "identifier": "devtest_gar_{{name}}",
    "title": {
      "en": "{{title}}",
      "nb": "{{title}}",
      "nn": "{{title}}"
    },
    "description": {
      "en": "{{title}} is a test resource requiring access list authorization of the party/reportee for development testing",
      "nb": "{{title}} er en test ressurs som krever at avgiver har fått tilgang til ressursen gjennom tilgangslister",
      "nn": "{{title}} er ein test ressurs som krev at avgiver har motteke tilgong til ressursen gjennom tilgongslister"
    },
    "rightDescription": {
      "en": "You'll give access to the resource {{title}}, a test resource requiring access list authorization of the party/reportee for development testing",
      "nb": "Du gir tilgang til ressursen {{title}}, en test ressurs som krever at avgiver har fått tilgang til ressursen gjennom tilgangslister",
      "nn": "Du gir tilgong til ressursen {{title}}, ein test ressurs som krev at avgiver har motteke tilgong til ressursen gjennom tilgongslister"
    },
    "homepage": "",
    "status": "Active",
    "contactPoints": [],
    "isPartOf": "",
    "resourceReferences": [],
    "delegable": true,
    "visible": true,
    "hasCompetentAuthority": {
      "organization": "991825827",
      "orgcode": "ttd"
    },
    "keywords": [],
    "accessListMode": "Enabled",
    "selfIdentifiedUserEnabled": false,
    "enterpriseUserEnabled": true,
    "resourceType": "GenericAccessResource"
  }
}

vars:pre-request {
  name: bruno_accesslist_actionfilter
  title: Bruno AccessList Resource With ActionFilter
}
